{"ast":null,"code":"import _slicedToArray from\"C:/Users/de-cl/Downloads/Derek/pointage/appli/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import DatePicker from'react-datepicker';import'react-datepicker/dist/react-datepicker.css';import logo from'./images/essailogo1.png';import fr from\"date-fns/locale/fr\";import{useAuth0}from\"@auth0/auth0-react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var getDays=function getDays(startDate,endDate){if(!startDate||!endDate){return[];}var days=[];var currentDate=new Date(startDate);while(currentDate<=endDate){days.push(currentDate);currentDate=new Date(currentDate.getTime()+86400000);// 86400000ms = 1 jour\n}return days;};var App=function App(){var _useState=useState([null,null]),_useState2=_slicedToArray(_useState,2),dateRange=_useState2[0],setDateRange=_useState2[1];var _dateRange=_slicedToArray(dateRange,2),startDate=_dateRange[0],endDate=_dateRange[1];var handleChange=function handleChange(update){setDateRange(update);};var handleChangeRaw=function handleChangeRaw(update){setDateRange([update.startDate,update.endDate]);};var days=getDays(startDate,endDate);var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),currentTime=_useState4[0],setCurrentTime=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),currentDateString=_useState6[0],setCurrentDateString=_useState6[1];useEffect(function(){var interval=setInterval(function(){var currentDate=new Date();var time=currentDate.toLocaleTimeString('fr-FR',{timeZone:'Europe/Paris'});setCurrentTime(time);var date=currentDate.toLocaleDateString('fr-FR',{day:'2-digit',month:'2-digit',year:'numeric'});setCurrentDateString(date);},1000);return function(){return clearInterval(interval);};},[]);// Define the totalHours variable\nvar totalHours=0;// Calculez le nombre total d'heures entrées par l'utilisateur\ntotalHours=days.reduce(function(acc,day){var formattedDate=day.toISOString().replace(/[:.]/g,'_');var hoursInput=document.querySelector(\"#hours-\".concat(formattedDate));if(hoursInput){return acc+parseInt(hoursInput.value,10);}return acc;},0);var handleSubmit=function handleSubmit(event){event.preventDefault();// Récupérez les commentaires de chaque jour\nvar comments=days.map(function(day){var formattedDate=day.toISOString().replace(/[:.]/g,'_');var commentInput=document.querySelector(\"#comment-\".concat(formattedDate));if(commentInput){return commentInput.value;}return'';});// Créez un objet contenant les données à envoyer à votre API\nvar data={startDate:startDate.toISOString(),endDate:endDate.toISOString(),totalHours:totalHours,comments:comments};// Envoyez les données à votre API\nfetch('/api/timesheets',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)}).then(function(response){return response.json();}).then(function(result){console.log(result);}).catch(function(error){console.error(error);});};// Call the useAuth0 hook\nvar _useAuth=useAuth0(),isAuthenticated=_useAuth.isAuthenticated;var _useAuth2=useAuth0(),loginWithRedirect=_useAuth2.loginWithRedirect;return/*#__PURE__*/_jsxs(\"div\",{children:[!isAuthenticated&&/*#__PURE__*/_jsxs(\"div\",{className:\" flex justify-center h-100vh flex-col items-center\",children:[/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"logo\",className:\"w-60 mt-4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-800 font-extrabold text-2xl mt-10\",children:\"Application de pointage hebdomadaire\"}),/*#__PURE__*/_jsx(\"button\",{className:\"w-40 bg-blue-800 rounded-md shadow-md text-white font-bold h-10 mt-60\",onClick:function onClick(){return loginWithRedirect();},children:\"Connexion\"})]}),isAuthenticated&&/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-gray-50\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center flex justify-center flex-col items-center\",children:[/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"logo\",className:\"w-60\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-bold\",children:currentTime}),/*#__PURE__*/_jsx(\"p\",{className:\"pb-4 font-bold\",children:currentDateString})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center\",children:/*#__PURE__*/_jsx(DatePicker,{placeholderText:\"Cliquez ici\",selectsRange:true,startDate:startDate,endDate:endDate,onChange:handleChange,onChangeRaw:handleChangeRaw,withPortal:true,locale:fr,onFocus:function onFocus(e){return e.target.readOnly=true;},className:\"mb-4 font-bold text-center\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 gap-4\",children:days.map(function(day,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-1 flex flex-col items-center p-4 rounded-md shadow-md bg-white\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm font-bold\",children:day.getDate()}),/*#__PURE__*/_jsx(\"p\",{children:day.toLocaleString('default',{weekday:'long'})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"bg-gray-200 rounded-md px-2 py-1 my-4 w-20 lg:w-40\"}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",step:\"1800\",className:\"bg-gray-200 rounded-md px-2 py-1\"})]},index);})}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-center mt-4 font-bold\",children:[\"Total: \",totalHours,\" heures\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center flex justify-center flex-col items-center\",children:/*#__PURE__*/_jsx(\"button\",{onSubmit:handleSubmit,className:\"py-1 px-2 bg-blue-800 text-white font-bold rounded-md shadow-md my-6\",children:\"ENREGISTRER\"})})]})]});};export default App;","map":{"version":3,"names":["React","useState","useEffect","DatePicker","logo","fr","useAuth0","getDays","startDate","endDate","days","currentDate","Date","push","getTime","App","dateRange","setDateRange","handleChange","update","handleChangeRaw","currentTime","setCurrentTime","currentDateString","setCurrentDateString","interval","setInterval","time","toLocaleTimeString","timeZone","date","toLocaleDateString","day","month","year","clearInterval","totalHours","reduce","acc","formattedDate","toISOString","replace","hoursInput","document","querySelector","parseInt","value","handleSubmit","event","preventDefault","comments","map","commentInput","data","fetch","method","headers","body","JSON","stringify","then","response","json","result","console","log","catch","error","isAuthenticated","loginWithRedirect","e","target","readOnly","index","getDate","toLocaleString","weekday"],"sources":["C:/Users/de-cl/Downloads/Derek/pointage/appli/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport DatePicker from 'react-datepicker';\nimport 'react-datepicker/dist/react-datepicker.css';\nimport logo from './images/essailogo1.png';\nimport fr from \"date-fns/locale/fr\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\n\n\n\nconst getDays = (startDate, endDate) => {\n  if (!startDate || !endDate) {\n    return [];\n  }\n\n  const days = [];\n  let currentDate = new Date(startDate);\n  while (currentDate <= endDate) {\n    days.push(currentDate);\n    currentDate = new Date(currentDate.getTime() + 86400000); // 86400000ms = 1 jour\n  }\n  return days;\n}\n\nconst App = () => {\n  const [dateRange, setDateRange] = useState([null, null]);\n  const [startDate, endDate] = dateRange;\n\n  const handleChange = (update) => {\n    setDateRange(update);\n  }\n\n  const handleChangeRaw = (update) => {\n    setDateRange([update.startDate, update.endDate]);\n  }\n\n  const days = getDays(startDate, endDate);\n\n\n\n  const [currentTime, setCurrentTime] = useState('');\n  const [currentDateString, setCurrentDateString] = useState('');\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      const currentDate = new Date();\n      const time = currentDate.toLocaleTimeString('fr-FR', { timeZone: 'Europe/Paris' });\n      setCurrentTime(time);\n      const date = currentDate.toLocaleDateString('fr-FR', {\n        day: '2-digit',\n        month: '2-digit',\n        year: 'numeric'\n      });\n      setCurrentDateString(date);\n    }, 1000);\n    return () => clearInterval(interval);\n  }, []);\n\n  // Define the totalHours variable\n  let totalHours = 0;\n\n  // Calculez le nombre total d'heures entrées par l'utilisateur\n  totalHours = days.reduce((acc, day) => {\n    const formattedDate = day.toISOString().replace(/[:.]/g, '_');\n    const hoursInput = document.querySelector(`#hours-${formattedDate}`);\n    if (hoursInput) {\n      return acc + parseInt(hoursInput.value, 10);\n    }\n    return acc;\n  }, 0);\n  const handleSubmit = (event) => {\n    event.preventDefault();\n\n\n\n    // Récupérez les commentaires de chaque jour\n    const comments = days.map((day) => {\n      const formattedDate = day.toISOString().replace(/[:.]/g, '_');\n      const commentInput = document.querySelector(`#comment-${formattedDate}`);\n      if (commentInput) {\n        return commentInput.value;\n      }\n      return '';\n    });\n\n    // Créez un objet contenant les données à envoyer à votre API\n    const data = {\n      startDate: startDate.toISOString(),\n      endDate: endDate.toISOString(),\n      totalHours,\n      comments,\n    };\n\n    // Envoyez les données à votre API\n    fetch('/api/timesheets', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(data),\n    })\n      .then((response) => response.json())\n      .then((result) => {\n        console.log(result);\n      })\n      .catch((error) => {\n        console.error(error);\n      });\n  }\n\n\n\n\n  // Call the useAuth0 hook\n  const { isAuthenticated} = useAuth0();\n\n  const { loginWithRedirect } = useAuth0();\n\n  return (\n    <div>\n      {/* Show the login button if the user is not authenticated */}\n      {!isAuthenticated && (\n        <div className=' flex justify-center h-100vh flex-col items-center'>\n          <img src={logo} alt='logo' className='w-60 mt-4'></img>\n          <p className='text-gray-800 font-extrabold text-2xl mt-10'>Application de pointage hebdomadaire</p>\n          <button className='w-40 bg-blue-800 rounded-md shadow-md text-white font-bold h-10 mt-60' onClick={() => loginWithRedirect()}>Connexion</button>\n        </div>\n      )}\n\n      {/* Show the user's profile information if they are authenticated */}\n      {isAuthenticated && (\n        \n          <div className='p-4 bg-gray-50'>\n            <div className=\"text-center flex justify-center flex-col items-center\">\n              <img src={logo} alt='logo' className='w-60'></img>\n              <p className='font-bold'>{currentTime}</p>\n              <p className='pb-4 font-bold'>{currentDateString}</p>\n            </div>\n            <div className='flex justify-center'>\n              <DatePicker\n                placeholderText='Cliquez ici'\n                selectsRange={true}\n                startDate={startDate}\n                endDate={endDate}\n                onChange={handleChange}\n                onChangeRaw={handleChangeRaw}\n                withPortal\n                locale={fr}\n                onFocus={(e) => e.target.readOnly = true}\n                className='mb-4 font-bold text-center'\n              />\n            </div>\n            <div className=\"grid grid-cols-2 gap-4\">\n              {days.map((day, index) => (\n                <div key={index} className=\"col-span-1 flex flex-col items-center p-4 rounded-md shadow-md bg-white\">\n                  <p className=\"text-gray-600 text-sm font-bold\">{day.getDate()}</p>\n                  <p>{day.toLocaleString('default', { weekday: 'long' })}</p>\n                  <input\n                    type=\"text\"\n                    className=\"bg-gray-200 rounded-md px-2 py-1 my-4 w-20 lg:w-40\"\n\n                  />\n                  <input type=\"time\" step='1800' className=\"bg-gray-200 rounded-md px-2 py-1\" />\n                </div>\n              ))}\n            </div>\n            <p className=\"text-center mt-4 font-bold\">Total: {totalHours} heures</p>\n            <div className='text-center flex justify-center flex-col items-center'>\n              <button onSubmit={handleSubmit} className='py-1 px-2 bg-blue-800 text-white font-bold rounded-md shadow-md my-6'>ENREGISTRER</button>\n            </div>\n          </div>\n      )}\n    </div>\n  );\n}\n\nexport default App"],"mappings":"mIAAA,MAAOA,MAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAOC,WAAU,KAAM,kBAAkB,CACzC,MAAO,4CAA4C,CACnD,MAAOC,KAAI,KAAM,yBAAyB,CAC1C,MAAOC,GAAE,KAAM,oBAAoB,CACnC,OAASC,QAAQ,KAAQ,oBAAoB,CAAC,wFAI9C,GAAMC,QAAO,CAAG,QAAVA,QAAO,CAAIC,SAAS,CAAEC,OAAO,CAAK,CACtC,GAAI,CAACD,SAAS,EAAI,CAACC,OAAO,CAAE,CAC1B,MAAO,EAAE,CACX,CAEA,GAAMC,KAAI,CAAG,EAAE,CACf,GAAIC,YAAW,CAAG,GAAIC,KAAI,CAACJ,SAAS,CAAC,CACrC,MAAOG,WAAW,EAAIF,OAAO,CAAE,CAC7BC,IAAI,CAACG,IAAI,CAACF,WAAW,CAAC,CACtBA,WAAW,CAAG,GAAIC,KAAI,CAACD,WAAW,CAACG,OAAO,EAAE,CAAG,QAAQ,CAAC,CAAE;AAC5D,CACA,MAAOJ,KAAI,CACb,CAAC,CAED,GAAMK,IAAG,CAAG,QAANA,IAAG,EAAS,CAChB,cAAkCd,QAAQ,CAAC,CAAC,IAAI,CAAE,IAAI,CAAC,CAAC,wCAAjDe,SAAS,eAAEC,YAAY,eAC9B,8BAA6BD,SAAS,IAA/BR,SAAS,eAAEC,OAAO,eAEzB,GAAMS,aAAY,CAAG,QAAfA,aAAY,CAAIC,MAAM,CAAK,CAC/BF,YAAY,CAACE,MAAM,CAAC,CACtB,CAAC,CAED,GAAMC,gBAAe,CAAG,QAAlBA,gBAAe,CAAID,MAAM,CAAK,CAClCF,YAAY,CAAC,CAACE,MAAM,CAACX,SAAS,CAAEW,MAAM,CAACV,OAAO,CAAC,CAAC,CAClD,CAAC,CAED,GAAMC,KAAI,CAAGH,OAAO,CAACC,SAAS,CAAEC,OAAO,CAAC,CAIxC,eAAsCR,QAAQ,CAAC,EAAE,CAAC,yCAA3CoB,WAAW,eAAEC,cAAc,eAClC,eAAkDrB,QAAQ,CAAC,EAAE,CAAC,yCAAvDsB,iBAAiB,eAAEC,oBAAoB,eAE9CtB,SAAS,CAAC,UAAM,CACd,GAAMuB,SAAQ,CAAGC,WAAW,CAAC,UAAM,CACjC,GAAMf,YAAW,CAAG,GAAIC,KAAI,EAAE,CAC9B,GAAMe,KAAI,CAAGhB,WAAW,CAACiB,kBAAkB,CAAC,OAAO,CAAE,CAAEC,QAAQ,CAAE,cAAe,CAAC,CAAC,CAClFP,cAAc,CAACK,IAAI,CAAC,CACpB,GAAMG,KAAI,CAAGnB,WAAW,CAACoB,kBAAkB,CAAC,OAAO,CAAE,CACnDC,GAAG,CAAE,SAAS,CACdC,KAAK,CAAE,SAAS,CAChBC,IAAI,CAAE,SACR,CAAC,CAAC,CACFV,oBAAoB,CAACM,IAAI,CAAC,CAC5B,CAAC,CAAE,IAAI,CAAC,CACR,MAAO,kBAAMK,cAAa,CAACV,QAAQ,CAAC,GACtC,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,GAAIW,WAAU,CAAG,CAAC,CAElB;AACAA,UAAU,CAAG1B,IAAI,CAAC2B,MAAM,CAAC,SAACC,GAAG,CAAEN,GAAG,CAAK,CACrC,GAAMO,cAAa,CAAGP,GAAG,CAACQ,WAAW,EAAE,CAACC,OAAO,CAAC,OAAO,CAAE,GAAG,CAAC,CAC7D,GAAMC,WAAU,CAAGC,QAAQ,CAACC,aAAa,kBAAWL,aAAa,EAAG,CACpE,GAAIG,UAAU,CAAE,CACd,MAAOJ,IAAG,CAAGO,QAAQ,CAACH,UAAU,CAACI,KAAK,CAAE,EAAE,CAAC,CAC7C,CACA,MAAOR,IAAG,CACZ,CAAC,CAAE,CAAC,CAAC,CACL,GAAMS,aAAY,CAAG,QAAfA,aAAY,CAAIC,KAAK,CAAK,CAC9BA,KAAK,CAACC,cAAc,EAAE,CAItB;AACA,GAAMC,SAAQ,CAAGxC,IAAI,CAACyC,GAAG,CAAC,SAACnB,GAAG,CAAK,CACjC,GAAMO,cAAa,CAAGP,GAAG,CAACQ,WAAW,EAAE,CAACC,OAAO,CAAC,OAAO,CAAE,GAAG,CAAC,CAC7D,GAAMW,aAAY,CAAGT,QAAQ,CAACC,aAAa,oBAAaL,aAAa,EAAG,CACxE,GAAIa,YAAY,CAAE,CAChB,MAAOA,aAAY,CAACN,KAAK,CAC3B,CACA,MAAO,EAAE,CACX,CAAC,CAAC,CAEF;AACA,GAAMO,KAAI,CAAG,CACX7C,SAAS,CAAEA,SAAS,CAACgC,WAAW,EAAE,CAClC/B,OAAO,CAAEA,OAAO,CAAC+B,WAAW,EAAE,CAC9BJ,UAAU,CAAVA,UAAU,CACVc,QAAQ,CAARA,QACF,CAAC,CAED;AACAI,KAAK,CAAC,iBAAiB,CAAE,CACvBC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACN,IAAI,CAC3B,CAAC,CAAC,CACCO,IAAI,CAAC,SAACC,QAAQ,QAAKA,SAAQ,CAACC,IAAI,EAAE,GAAC,CACnCF,IAAI,CAAC,SAACG,MAAM,CAAK,CAChBC,OAAO,CAACC,GAAG,CAACF,MAAM,CAAC,CACrB,CAAC,CAAC,CACDG,KAAK,CAAC,SAACC,KAAK,CAAK,CAChBH,OAAO,CAACG,KAAK,CAACA,KAAK,CAAC,CACtB,CAAC,CAAC,CACN,CAAC,CAKD;AACA,aAA2B7D,QAAQ,EAAE,CAA7B8D,eAAe,UAAfA,eAAe,CAEvB,cAA8B9D,QAAQ,EAAE,CAAhC+D,iBAAiB,WAAjBA,iBAAiB,CAEzB,mBACE,uBAEG,CAACD,eAAe,eACf,aAAK,SAAS,CAAC,oDAAoD,wBACjE,YAAK,GAAG,CAAEhE,IAAK,CAAC,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,WAAW,EAAO,cACvD,UAAG,SAAS,CAAC,6CAA6C,UAAC,sCAAoC,EAAI,cACnG,eAAQ,SAAS,CAAC,uEAAuE,CAAC,OAAO,CAAE,yBAAMiE,kBAAiB,EAAE,EAAC,UAAC,WAAS,EAAS,GAEnJ,CAGAD,eAAe,eAEZ,aAAK,SAAS,CAAC,gBAAgB,wBAC7B,aAAK,SAAS,CAAC,uDAAuD,wBACpE,YAAK,GAAG,CAAEhE,IAAK,CAAC,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,MAAM,EAAO,cAClD,UAAG,SAAS,CAAC,WAAW,UAAEiB,WAAW,EAAK,cAC1C,UAAG,SAAS,CAAC,gBAAgB,UAAEE,iBAAiB,EAAK,GACjD,cACN,YAAK,SAAS,CAAC,qBAAqB,uBAClC,KAAC,UAAU,EACT,eAAe,CAAC,aAAa,CAC7B,YAAY,CAAE,IAAK,CACnB,SAAS,CAAEf,SAAU,CACrB,OAAO,CAAEC,OAAQ,CACjB,QAAQ,CAAES,YAAa,CACvB,WAAW,CAAEE,eAAgB,CAC7B,UAAU,MACV,MAAM,CAAEf,EAAG,CACX,OAAO,CAAE,iBAACiE,CAAC,QAAKA,EAAC,CAACC,MAAM,CAACC,QAAQ,CAAG,IAAI,EAAC,CACzC,SAAS,CAAC,4BAA4B,EACtC,EACE,cACN,YAAK,SAAS,CAAC,wBAAwB,UACpC9D,IAAI,CAACyC,GAAG,CAAC,SAACnB,GAAG,CAAEyC,KAAK,qBACnB,aAAiB,SAAS,CAAC,yEAAyE,wBAClG,UAAG,SAAS,CAAC,iCAAiC,UAAEzC,GAAG,CAAC0C,OAAO,EAAE,EAAK,cAClE,mBAAI1C,GAAG,CAAC2C,cAAc,CAAC,SAAS,CAAE,CAAEC,OAAO,CAAE,MAAO,CAAC,CAAC,EAAK,cAC3D,cACE,IAAI,CAAC,MAAM,CACX,SAAS,CAAC,oDAAoD,EAE9D,cACF,cAAO,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,kCAAkC,EAAG,GARtEH,KAAK,CAST,EACP,CAAC,EACE,cACN,WAAG,SAAS,CAAC,4BAA4B,WAAC,SAAO,CAACrC,UAAU,CAAC,SAAO,GAAI,cACxE,YAAK,SAAS,CAAC,uDAAuD,uBACpE,eAAQ,QAAQ,CAAEW,YAAa,CAAC,SAAS,CAAC,sEAAsE,UAAC,aAAW,EAAS,EACjI,GAEX,GACG,CAEV,CAAC,CAED,cAAehC,IAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}